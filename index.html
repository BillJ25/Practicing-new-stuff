<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haha! Enjoy the music!</title>
       <style>
        /* Fullscreen centered content */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: black; /* Clean background */
            overflow: hidden;
            color: white;
            font-family: Arial, sans-serif;
        }

        /* Styling for the initial prompt */
        .intro-message {
            font-size: 24px;
            text-align: center;
            font-weight: bold;
            opacity: 1;
            transition: opacity 1s;
        }

        /* Styling for video container */
        .video-container {
            display: none; /* Hide the video initially */
            width: 94vw;
            height: 94vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        video {
            width: 100%;
            height: 100%;
            max-width: 100%;
            max-height: 100%;
            aspect-ratio: 4 / 3;
            object-fit: contain;
        }
    </style>
</head>
<body>

    <!-- Initial Message Prompt -->
    <div class="intro-message" id="introMessage">
        Hold down volume up, then tap screen.
    </div>

    <!-- Video Container (hidden initially) -->
    <div class="video-container" id="videoContainer">
        <video id="myVideo" autoplay muted playsinline>
            <source src="Calum_Dan_Van_trim_small.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const video = document.getElementById("myVideo");
            const introMessage = document.getElementById("introMessage");
            const videoContainer = document.getElementById("videoContainer");

            let isVideoPlaying = false;

            // Function to reveal the video and start playing when the user taps the screen
            function enableVideoPlayback() {
                introMessage.style.opacity = '0'; // Fade out the message
                setTimeout(() => {
                    introMessage.style.display = 'none'; // Hide the message completely
                    videoContainer.style.display = 'flex'; // Show the video container
                    video.volume = 1.0; // Set volume to 100%
                    video.play(); // Start playing the video
                    isVideoPlaying = true;

                    // Prevent pause and volume change for 10 seconds
                    preventPauseAndVolume();
                }, 1000); // Wait for the opacity transition to complete
            }

            // Wait for a tap or click to reveal and play the video
            document.addEventListener("click", enableVideoPlayback);

            // Prevent pausing and volume change for 10 seconds after playback starts
            function preventPauseAndVolume() {
                video.addEventListener("pause", preventPause);
                video.addEventListener("volumechange", preventVolumeChange);

                function preventPause() {
                    video.play(); // Force play if user tries to pause
                }

                function preventVolumeChange() {
                    if (video.volume < 1.0) {
                        video.volume = 1.0; // Force max volume
                    }
                }

                // Prevent volume adjustment during the first 10 seconds
                let volumeCheckInterval = setInterval(() => {
                    if (video.volume < 1.0) {
                        video.volume = 1.0; // Force max volume
                    }
                }, 100); // Check every 100ms

                // After 10 seconds, allow pausing and volume changes again
                setTimeout(() => {
                    clearInterval(volumeCheckInterval); // Stop checking the volume
                    video.removeEventListener("pause", preventPause);
                    video.removeEventListener("volumechange", preventVolumeChange);
                    console.log("User can now pause and change volume.");
                }, 10000);
            }

            // Loop the video 5 seconds after it finishes
            video.addEventListener('ended', function() {
                console.log("Video finished. Waiting 5 seconds to restart.");
                setTimeout(function() {
                    console.log("Video restarting...");
                    video.play();
                }, 5000); // Delay the restart for 5 seconds
            });
        });
    </script>

</body>
</html>
